(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))i(s);new MutationObserver(s=>{for(const o of s)if(o.type==="childList")for(const r of o.addedNodes)r.tagName==="LINK"&&r.rel==="modulepreload"&&i(r)}).observe(document,{childList:!0,subtree:!0});function t(s){const o={};return s.integrity&&(o.integrity=s.integrity),s.referrerPolicy&&(o.referrerPolicy=s.referrerPolicy),s.crossOrigin==="use-credentials"?o.credentials="include":s.crossOrigin==="anonymous"?o.credentials="omit":o.credentials="same-origin",o}function i(s){if(s.ep)return;s.ep=!0;const o=t(s);fetch(s.href,o)}})();const w="modulepreload",C=function(c,e){return new URL(c,e).href},v={},_=function(e,t,i){let s=Promise.resolve();if(t&&t.length>0){let l=function(a){return Promise.all(a.map(h=>Promise.resolve(h).then(d=>({status:"fulfilled",value:d}),d=>({status:"rejected",reason:d}))))};const r=document.getElementsByTagName("link"),n=document.querySelector("meta[property=csp-nonce]"),u=n?.nonce||n?.getAttribute("nonce");s=l(t.map(a=>{if(a=C(a,i),a in v)return;v[a]=!0;const h=a.endsWith(".css"),d=h?'[rel="stylesheet"]':"";if(!!i)for(let p=r.length-1;p>=0;p--){const g=r[p];if(g.href===a&&(!h||g.rel==="stylesheet"))return}else if(document.querySelector(`link[href="${a}"]${d}`))return;const f=document.createElement("link");if(f.rel=h?"stylesheet":w,h||(f.as="script"),f.crossOrigin="",f.href=a,u&&f.setAttribute("nonce",u),document.head.appendChild(f),h)return new Promise((p,g)=>{f.addEventListener("load",p),f.addEventListener("error",()=>g(new Error(`Unable to preload CSS for ${a}`)))})}))}function o(r){const n=new Event("vite:preloadError",{cancelable:!0});if(n.payload=r,window.dispatchEvent(n),!n.defaultPrevented)throw r}return s.then(r=>{for(const n of r||[])n.status==="rejected"&&o(n.reason);return e().catch(o)})};class E{constructor(){this.isMenuOpen=!1,this.burgerBtn=null,this.mobileMenu=null,this.navLinks=[],this.header=null,this.isScrolled=!1,this.currentPage="home",this.whiteBgPages=["offices","office","blog","blog-post"]}init(){this.header=document.querySelector(".header"),this.burgerBtn=document.getElementById("burger-btn"),this.mobileMenu=document.getElementById("mobile-menu"),this.navLinks=document.querySelectorAll(".header__nav-link"),this.logo=document.querySelector(".header__logo"),this.currentPage=this.getCurrentPage(),this.bindEvents(),this.setupMobileMenu(),this.initScrollHandler(),this.updateHeaderState(),this.setActiveLink(this.currentPage)}bindEvents(){if(this.burgerBtn&&this.burgerBtn.addEventListener("click",()=>this.toggleMobileMenu()),this.mobileMenu){const e=this.mobileMenu.querySelector(".mobile-menu__overlay");e&&e.addEventListener("click",()=>this.closeMobileMenu())}this.logo&&this.logo.addEventListener("click",()=>this.closeMobileMenu()),this.navLinks.forEach(e=>{e.addEventListener("click",()=>this.closeMobileMenu())})}setupMobileMenu(){const e=this.mobileMenu?.querySelector(".mobile-menu__nav");if(!e||this.navLinks.length===0)return;e.innerHTML="",this.navLinks.forEach(i=>{const s=i.cloneNode(!0);s.classList.remove("header__nav-link"),s.classList.add("mobile-menu__link"),e.appendChild(s)}),e.querySelectorAll(".mobile-menu__link").forEach(i=>{i.addEventListener("click",()=>this.closeMobileMenu())})}toggleMobileMenu(){this.isMenuOpen?this.closeMobileMenu():this.openMobileMenu()}openMobileMenu(){this.mobileMenu&&this.burgerBtn&&(this.mobileMenu.classList.add("active"),this.burgerBtn.classList.add("active"),document.body.style.overflow="hidden",this.isMenuOpen=!0,this.updateHeaderState())}closeMobileMenu(){this.mobileMenu&&this.burgerBtn&&(this.mobileMenu.classList.remove("active"),this.burgerBtn.classList.remove("active"),document.body.style.overflow="",this.isMenuOpen=!1,this.updateHeaderState())}initScrollHandler(){window.addEventListener("scroll",()=>{const e=window.pageYOffset||document.documentElement.scrollTop;this.isScrolled=e>50,this.updateHeaderState()})}updateHeaderState(){if(!this.header)return;const e=this.whiteBgPages.includes(this.currentPage),t=!e&&this.isScrolled;this.isMenuOpen||e||t?this.header.classList.add("header--white-bg"):this.header.classList.remove("header--white-bg")}getCurrentPage(){return(window.location.pathname.split("/").pop()||"home").replace(".html","")}onPageChange(e){this.currentPage=e,this.updateHeaderState(),this.setActiveLink(e)}setActiveLink(e){if(this.navLinks.forEach(i=>{i.classList.remove("active")}),e==="home")return;const t=Array.from(this.navLinks).find(i=>i.getAttribute("data-page")===e);t&&t.classList.add("active")}update(){this.navLinks=document.querySelectorAll(".header__nav-link"),this.setupMobileMenu(),this.updateHeaderState();const e=this.getCurrentPage();this.setActiveLink(e)}}class L{constructor(e,t={}){this.container=typeof e=="string"?document.querySelector(e):e,this.options={itemSelector:".accordion__item",triggerSelector:".accordion__trigger",contentSelector:".accordion__content",activeClass:"active",allowMultiple:!1,closeOthers:!0,animationDuration:300,onOpen:null,onClose:null,onToggle:null,...t},this.items=[],this.init()}init(){this.container&&(this.items=Array.from(this.container.querySelectorAll(this.options.itemSelector)),this.items.length!==0&&this.bindEvents())}bindEvents(){this.items.forEach((e,t)=>{const i=e.querySelector(this.options.triggerSelector);i&&i.addEventListener("click",s=>{s.preventDefault(),this.toggleItem(t)})})}toggleItem(e){const t=this.items[e];if(!t)return;t.classList.contains(this.options.activeClass)?this.closeItem(e):this.openItem(e)}openItem(e){const t=this.items[e];t&&(this.options.closeOthers&&this.closeAll(),t.classList.add(this.options.activeClass),this.options.onOpen&&this.options.onOpen(t,e),this.options.onToggle&&this.options.onToggle(t,e,!0))}closeItem(e){const t=this.items[e];t&&(t.classList.remove(this.options.activeClass),this.options.onClose&&this.options.onClose(t,e),this.options.onToggle&&this.options.onToggle(t,e,!1))}closeAll(){this.items.forEach((e,t)=>{e.classList.contains(this.options.activeClass)&&this.closeItem(t)})}openAll(){this.options.allowMultiple&&this.items.forEach((e,t)=>{e.classList.contains(this.options.activeClass)||this.openItem(t)})}getActiveItems(){return this.items.filter(e=>e.classList.contains(this.options.activeClass))}getActiveIndex(){const e=this.getActiveItems();return e.length>0?this.items.indexOf(e[0]):null}refresh(){this.items=Array.from(this.container.querySelectorAll(this.options.itemSelector)),this.bindEvents()}destroy(){this.items.forEach(e=>{const t=e.querySelector(this.options.triggerSelector);t&&t.replaceWith(t.cloneNode(!0))}),this.items=[]}}class k{constructor(e=".faq"){this.container=e,this.accordion=null,this.init()}init(){const e=typeof this.container=="string"?document.querySelector(this.container):this.container;e&&(this.accordion=new L(e,{itemSelector:".faq__item",triggerSelector:".faq__title-wrapper",contentSelector:".faq__answer",activeClass:"active",allowMultiple:!1,closeOthers:!0}))}openItem(e){this.accordion&&this.accordion.openItem(e)}closeAll(){this.accordion&&this.accordion.closeAll()}getActiveItem(){if(this.accordion){const e=this.accordion.getActiveItems();return e.length>0?e[0]:null}return null}refresh(){this.accordion&&this.accordion.refresh()}destroy(){this.accordion&&(this.accordion.destroy(),this.accordion=null)}}class T{constructor(e={}){this.endpoint=e.endpoint||"/add.php",this.modalElement=null,this.isOpen=!1,this.app=e.app||null}init(){}open(){if(this.isOpen)return;this.render(),document.body.appendChild(this.modalElement),document.body.style.overflow="hidden",this.isOpen=!0;const e=this.modalElement.querySelector('input[name="name"]');e&&e.focus({preventScroll:!0})}close(){this.isOpen&&(this.modalElement.remove(),document.body.style.overflow="",this.isOpen=!1,this.modalElement=null)}render(){const e=document.createElement("div");e.className="modal",e.innerHTML=`
      <div class="modal__container" role="dialog" aria-modal="true" aria-labelledby="feedback-modal-title">
        <button type="button" class="modal__close" aria-label="Закрыть">
          <svg width="18" height="18" viewBox="0 0 18 18" fill="none" xmlns="http://www.w3.org/2000/svg">
            <path d="M14.4608 13.6645C14.513 13.7167 14.5545 13.7788 14.5828 13.8471C14.6111 13.9154 14.6256 13.9885 14.6256 14.0624C14.6256 14.1364 14.6111 14.2095 14.5828 14.2778C14.5545 14.3461 14.513 14.4082 14.4608 14.4604C14.4085 14.5127 14.3465 14.5541 14.2782 14.5824C14.2099 14.6107 14.1367 14.6253 14.0628 14.6253C13.9889 14.6253 13.9157 14.6107 13.8474 14.5824C13.7792 14.5541 13.7171 14.5127 13.6648 14.4604L9.00031 9.79518L4.33578 14.4604C4.23023 14.566 4.08708 14.6253 3.93781 14.6253C3.78855 14.6253 3.64539 14.566 3.53984 14.4604C3.4343 14.3549 3.375 14.2117 3.375 14.0624C3.375 13.9132 3.4343 13.77 3.53984 13.6645L8.20508 8.99995L3.53984 4.33542C3.4343 4.22987 3.375 4.08671 3.375 3.93745C3.375 3.78818 3.4343 3.64503 3.53984 3.53948C3.64539 3.43393 3.78855 3.37463 3.93781 3.37463C4.08708 3.37463 4.23023 3.43393 4.33578 3.53948L9.00031 8.20471L13.6648 3.53948C13.7704 3.43393 13.9135 3.37463 14.0628 3.37463C14.2121 3.37463 14.3552 3.43393 14.4608 3.53948C14.5663 3.64503 14.6256 3.78818 14.6256 3.93745C14.6256 4.08671 14.5663 4.22987 14.4608 4.33542L9.79555 8.99995L14.4608 13.6645Z" fill="#0B1E21"/>
          </svg>
        </button>
        <div class="modal__root">
          <div class="modal__wrapper" data-role="form-wrapper">
            <div class="modal__wrapper-grid">
              <div class="modal__content">
                <h2 class="modal__title">Start Your Virtual Office in Dubai</h2>
                <p class="modal__description">
                  Ready to set up a virtual office in Dubai? <br> Leave your details — we’ll get back to you shortly with all the essentials.
                </p>
              </div>
              <form class="feedback-form" action="${this.endpoint}" method="POST" novalidate>
                <div class="feedback-form__inputs">
                
                  <div class="feedback-form__inputs-wrapper"> 
                  
                    <div class="feedback-form__form-field">
                      <label for="feedback-name">name</label>
                      <input id="feedback-name" name="name" type="text" required placeholder="Your name" />
                      <div class="field-error" data-error-for="name"></div>
                    </div>

                    <div class="feedback-form__form-field">
                      <label for="feedback-phone">phone</label>
                      <input id="feedback-phone" name="phone" type="tel" required placeholder="Your phone" />
                      <div class="field-error" data-error-for="phone"></div>
                    </div>
                  
                  </div>

                  <div class="feedback-form__form-field">
                    <label for="feedback-email">email</label>
                    <input id="feedback-email" name="email" type="email" required placeholder="Your email" />
                    <div class="field-error" data-error-for="email"></div>
                  </div>

                  <fieldset class="feedback-form__form-field">
                    <legend>method of communication</legend>
                    <div class="feedback-form__checkboxes">
                      <label><input type="checkbox" name="contact_methods[]" value="Telegram" /> Telegram</label>
                      <label><input type="checkbox" name="contact_methods[]" value="WhatsApp" /> WhatsApp</label>
                      <label><input type="checkbox" name="contact_methods[]" value="Email" /> Email</label>
                    </div>
                    <div class="field-error" data-error-for="contact_methods"></div>
                  </fieldset>

                  <input type="hidden" name="page" value="${window.location.href}" />

                </div>

                <div class="modal__footer">
                  <button type="submit" class="modal__button" data-role="submit">Get in touch</button>
                  <span class="modal-footer__description">By clicking the button, you agree to the <a href="#">privacy policy</a></span>
                </div>

              </form>
            </div>
          </div>

          <div class="modal__wrapper" data-role="loading-wrapper">
            <div class="modal__content center">
              <div class="loader loader ">
                <span class="d"></span>
                <span class="d"></span>
                <span class="d"></span>
                <span class="d"></span>
              </div>
              <h2 class="modal__title">Submitting your request…</h2>
              <p class="modal__description">Please wait while we process your details.</p>
            </div>
          </div>
          
          <div class="modal__wrapper" data-role="success-wrapper">
            <div class="modal__content center">
              <svg width="76" height="76" viewBox="0 0 76 76" fill="none" xmlns="http://www.w3.org/2000/svg">
                <rect width="76" height="76" rx="38" fill="#2E706A"/>
                <path d="M49.1196 32.4941L35.1195 46.4941C35.0383 46.5754 34.9418 46.64 34.8356 46.684C34.7293 46.728 34.6155 46.7507 34.5005 46.7507C34.3855 46.7507 34.2716 46.728 34.1654 46.684C34.0592 46.64 33.9627 46.5754 33.8814 46.4941L27.7564 40.3691C27.5922 40.2049 27.5 39.9822 27.5 39.75C27.5 39.5178 27.5922 39.2951 27.7564 39.1309C27.9206 38.9667 28.1433 38.8745 28.3755 38.8745C28.6077 38.8745 28.8304 38.9667 28.9945 39.1309L34.5005 44.638L47.8814 31.2559C48.0456 31.0917 48.2683 30.9995 48.5005 30.9995C48.7327 30.9995 48.9554 31.0917 49.1196 31.2559C49.2837 31.4201 49.376 31.6428 49.376 31.875C49.376 32.1072 49.2837 32.3299 49.1196 32.4941Z" fill="white"/>
              </svg>

              <h2 class="modal__title">Thank you! <br> Your request is submitted</h2>
              <p class="modal__description">Our team will contact you soon with all the details about your virtual office in Dubai.</p>
              <button type="button" class="modal__button">Homepage</button>
            </div>
          </div>

          <div class="modal__wrapper" data-role="error-wrapper">
            <div class="modal__content center">
              <svg width="76" height="76" viewBox="0 0 76 76" fill="none" xmlns="http://www.w3.org/2000/svg">
                <rect width="76" height="76" rx="38" fill="#E34040"/>
                <path d="M46.4946 45.2559C46.5758 45.3372 46.6403 45.4337 46.6843 45.54C46.7283 45.6462 46.751 45.76 46.751 45.875C46.751 45.99 46.7283 46.1038 46.6843 46.21C46.6403 46.3163 46.5758 46.4128 46.4946 46.4941C46.4133 46.5754 46.3167 46.6398 46.2105 46.6838C46.1043 46.7278 45.9905 46.7505 45.8755 46.7505C45.7605 46.7505 45.6467 46.7278 45.5405 46.6838C45.4342 46.6398 45.3377 46.5754 45.2564 46.4941L38.0005 39.237L30.7445 46.4941C30.5804 46.6582 30.3577 46.7505 30.1255 46.7505C29.8933 46.7505 29.6706 46.6582 29.5064 46.4941C29.3422 46.3299 29.25 46.1072 29.25 45.875C29.25 45.6428 29.3422 45.4201 29.5064 45.2559L36.7635 38L29.5064 30.7441C29.3422 30.5799 29.25 30.3572 29.25 30.125C29.25 29.8928 29.3422 29.6701 29.5064 29.5059C29.6706 29.3418 29.8933 29.2495 30.1255 29.2495C30.3577 29.2495 30.5804 29.3418 30.7445 29.5059L38.0005 36.763L45.2564 29.5059C45.4206 29.3418 45.6433 29.2495 45.8755 29.2495C46.1077 29.2495 46.3304 29.3418 46.4946 29.5059C46.6587 29.6701 46.751 29.8928 46.751 30.125C46.751 30.3572 46.6587 30.5799 46.4946 30.7441L39.2375 38L46.4946 45.2559Z" fill="white"/>
              </svg>

              <h2 class="modal__title">Something went wrong</h2>
              <p class="modal__description">Please try again later or contact us directly for assistance with your virtual office setup.</p>
              <div class="modal__button-wrapper">
                <button type="button" class="modal__button white">Homepage</button>
                <button type="button" class="modal__button re-try">Try again</button>
              </div>
            </div>
          </div>
        </div>
      </div>
    `,this.modalElement=e,this.bindEvents(),this.bindWrapperButtons(),this.showWrapper("form")}bindEvents(){const e=this.modalElement,t=e.querySelector(".modal__close"),i=e.querySelector(".feedback-form"),s=a=>{a.key==="Escape"&&this.close()};e.addEventListener("click",a=>{a.target===e&&this.close()}),t.addEventListener("click",()=>this.close()),document.addEventListener("keydown",s,{once:!0}),i.addEventListener("submit",async a=>{if(a.preventDefault(),!!this.validateForm(i)){this.showWrapper("loading");try{const d=new window.FormData(i);await new Promise(m=>setTimeout(m,1500));try{if(!(await fetch(this.endpoint,{method:"POST",body:d,headers:{"X-Requested-With":"XMLHttpRequest"}})).ok)throw new Error("Network error");this.showWrapper("success"),i.reset()}catch(m){console.log("Server error (simulating success for demo):",m),this.showWrapper("success"),i.reset()}}catch(d){console.log("General error (simulating success for demo):",d),this.showWrapper("success"),i.reset()}}});const o=(a,h)=>{a.addEventListener("input",()=>{const d=i.querySelector(`.field-error[data-error-for="${h}"]`);d&&d.textContent&&(d.textContent=""),a.classList.remove("error")})},r=i.querySelector('input[name="name"]'),n=i.querySelector('input[name="phone"]'),u=i.querySelector('input[name="email"]'),l=i.querySelectorAll('input[name="contact_methods[]"]');r&&o(r,"name"),u&&o(u,"email"),l.length&&l.forEach(a=>{const h=a.closest("label");this.updateCheckboxState(a,h),a.addEventListener("change",()=>{this.updateCheckboxState(a,h);const d=i.querySelector('.field-error[data-error-for="contact_methods"]');d&&d.textContent&&(d.textContent="")})}),n&&n.addEventListener("input",()=>{const h=n.value.replace(/[^+0-9\s()-]/g,"");n.value=h;const d=i.querySelector('.field-error[data-error-for="phone"]');d&&d.textContent&&(d.textContent="")})}validateForm(e){const t=e.querySelector('input[name="name"]'),i=e.querySelector('input[name="phone"]'),s=e.querySelector('input[name="email"]'),o=e.querySelectorAll('input[name="contact_methods[]"]'),r=(d,m,f)=>{const p=e.querySelector(`.field-error[data-error-for="${m}"]`);p&&(p.textContent=f||""),d&&(f?d.classList.add("error"):d.classList.remove("error"))};let n=!0;!t.value||t.value.trim().length<2?(r(t,"name","Please enter your name (minimum 2 characters)"),n=!1):r(t,"name",""),(i.value||"").replace(/\D/g,"").length<10?(r(i,"phone","Please enter a valid phone number"),n=!1):r(i,"phone","");const l=(s.value||"").trim();return/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(l)?r(s,"email",""):(r(s,"email","Please enter a valid email address"),n=!1),Array.from(o).some(d=>d.checked)?r(null,"contact_methods",""):(r(null,"contact_methods","Please select at least one contact method"),n=!1),n}updateCheckboxState(e,t){e.checked?t.classList.add("active"):t.classList.remove("active")}showWrapper(e){const t=this.modalElement,i=t.querySelector('[data-role="form-wrapper"]'),s=t.querySelector('[data-role="loading-wrapper"]'),o=t.querySelector('[data-role="success-wrapper"]'),r=t.querySelector('[data-role="error-wrapper"]');switch([i,s,o,r].forEach(n=>{n&&n.style.setProperty("display","none")}),e){case"form":i&&i.style.setProperty("display","flex");break;case"loading":s&&s.style.setProperty("display","flex");break;case"success":o&&o.style.setProperty("display","flex");break;case"error":r&&r.style.setProperty("display","flex");break}}bindWrapperButtons(){const e=this.modalElement,t=e.querySelector('[data-role="success-wrapper"] .modal__button');t&&t.addEventListener("click",()=>{this.navigateToHome()});const i=e.querySelector('[data-role="error-wrapper"] .modal__button.white'),s=e.querySelector('[data-role="error-wrapper"] .modal__button.re-try');i&&i.addEventListener("click",()=>{this.navigateToHome()}),s&&s.addEventListener("click",()=>{this.showWrapper("form")})}navigateToHome(){this.app&&typeof this.app.loadPage=="function"?this.app.loadPage("home"):window.location.href="/",this.close()}}const y={offices:{filterSelector:".offices-page__filter-button",activeClass:"active",cardSelector:".office-card",typeAttribute:"data-type",defaultType:"business-center",filterTypes:{all:"all","business centers":"business-center",coworkings:"coworking"},typeMapping:{"business-center":"business center",coworking:"coworking"}},blog:{filterSelector:".offices-page__filter-button",activeClass:"active",cardSelector:".office-card",typeAttribute:"data-type",defaultType:"all",filterTypes:{all:"all","business centers":"business-center",coworkings:"coworking",life:"life"},typeMapping:{"business-center":"business center",coworking:"coworking",life:"life"}},universal:{filterSelector:".filter-button",activeClass:"active",cardSelector:".card",typeAttribute:"data-type",defaultType:"default",filterTypes:{}}};function M(){const c=[];return Object.keys(y).forEach(e=>{const t=y[e];document.querySelector(t.filterSelector)&&c.push({...t,pageName:e})}),c}function A(c,e,t="data-type",i="default"){return{filterSelector:c,activeClass:"active",cardSelector:e,typeAttribute:t,defaultType:i,filterTypes:{}}}function q(){const c=[".offices-page__filter-button",".filter-button",".btn-filter","[data-filter]"],e=[".office-card",".card",".grid-card","[data-type]"];for(const t of c)if(document.querySelector(t)){for(const i of e)if(document.querySelector(i))return A(t,i)}return null}class P{constructor(){this.data=[],this.filteredData=[],this.currentFilter="all",this.availableTypes=new Set(["all"])}init(e=".card",t="data-type",i="default"){const s=document.querySelectorAll(e);this.data=Array.from(s).map((o,r)=>{const n=o.getAttribute(t)||i;return{id:r,element:o,type:n,visible:!0}}),this.updateAvailableTypes(),this.filteredData=[...this.data],this.updateCounts()}updateAvailableTypes(){this.availableTypes.clear(),this.availableTypes.add("all"),this.data.forEach(e=>{e.type&&this.availableTypes.add(e.type)})}filterByType(e){this.availableTypes.has(e)&&(this.currentFilter=e,this.data.forEach(t=>{e==="all"||t.type===e?(t.visible=!0,t.element.style.display=""):(t.visible=!1,t.element.style.display="none")}),this.filteredData=this.data.filter(t=>t.visible),this.updateCounts())}getCounts(){const e={all:this.data.length};return this.availableTypes.forEach(t=>{t!=="all"&&(e[t]=0)}),this.data.forEach(t=>{t.type&&Object.prototype.hasOwnProperty.call(e,t.type)&&e[t.type]++}),e}getFilteredCount(){return this.filteredData.length}updateCounts(e=".filter-button",t=null){const i=this.getCounts();document.querySelectorAll(e).forEach(o=>{const r=o.textContent.toLowerCase(),n=o.textContent;if(r.includes("all")){o.textContent=n.replace(/\(\d+\)/,`(${i.all})`);return}let u=!1;this.availableTypes.forEach(l=>{if(l==="all")return;const a=t&&t[l]?t[l].toLowerCase():l.toLowerCase();r.includes(a)&&i[l]!==void 0&&(o.textContent=n.replace(/\(\d+\)/,`(${i[l]})`),u=!0)}),u||this.availableTypes.forEach(l=>{l==="all"||u||r.includes(l.toLowerCase())&&i[l]!==void 0&&(o.textContent=n.replace(/\(\d+\)/,`(${i[l]})`),u=!0)})})}getCurrentFilter(){return this.currentFilter}getAllData(){return this.data}getFilteredData(){return this.filteredData}getAvailableTypes(){return Array.from(this.availableTypes)}hasType(e){return this.availableTypes.has(e)}refresh(e=".card",t="data-type",i="default"){this.init(e,t,i)}}class I{constructor(e={}){this.config={filterSelector:".filter-button",activeClass:"active",cardSelector:".card",typeAttribute:"data-type",filterTypes:{},...e},this.filterButtons=[],this.dataManager=new P,this.onFilterChange=null}init(){this.filterButtons=Array.from(document.querySelectorAll(this.config.filterSelector)),this.filterButtons.length!==0&&(this.dataManager.init(this.config.cardSelector,this.config.typeAttribute,this.config.defaultType||"default"),this.bindEvents(),this.updateButtonCounts())}bindEvents(){this.filterButtons.forEach(e=>{e.addEventListener("click",t=>{t.preventDefault(),this.handleFilterClick(e)})})}handleFilterClick(e){this.filterButtons.forEach(s=>{s.classList.remove(this.config.activeClass)}),e.classList.add(this.config.activeClass);const t=e.textContent.toLowerCase();let i="all";this.config.filterTypes&&Object.keys(this.config.filterTypes).length>0?Object.keys(this.config.filterTypes).forEach(s=>{t.includes(s.toLowerCase())&&(i=this.config.filterTypes[s])}):this.dataManager.getAvailableTypes().forEach(o=>{o!=="all"&&t.includes(o.toLowerCase())&&(i=o)}),this.dataManager.filterByType(i),this.onFilterChange&&this.onFilterChange(i,this.dataManager.getFilteredData())}update(){this.filterButtons=Array.from(document.querySelectorAll(this.config.filterSelector)),this.dataManager.refresh(this.config.cardSelector,this.config.typeAttribute,this.config.defaultType||"default"),this.bindEvents(),this.updateButtonCounts()}updateButtonCounts(){const e=this.config.typeMapping||null;this.dataManager.updateCounts(this.config.filterSelector,e)}setFilterChangeCallback(e){this.onFilterChange=e}getDataManager(){return this.dataManager}applyFilter(e){if(!this.dataManager.hasType(e))return;const t=this.filterButtons.find(i=>{const s=i.textContent.toLowerCase();return this.config.filterTypes&&Object.keys(this.config.filterTypes).length>0?Object.keys(this.config.filterTypes).some(o=>s.includes(o.toLowerCase())&&this.config.filterTypes[o]===e):s.includes(e.toLowerCase())});t&&this.handleFilterClick(t)}destroy(){this.filterButtons.forEach(e=>{e.removeEventListener("click",this.handleFilterClick)}),this.filterButtons=[]}}class b{constructor({containerSelector:e=".gallery",thumbsSelector:t=".gallery__thumbs",mainSelector:i=".gallery__main"}={}){this.container=document.querySelector(e),this.thumbs=this.container?this.container.querySelector(t):null,this.mainContainer=this.container?this.container.querySelector(i):null,this.mainImg=this.mainContainer?this.mainContainer.querySelector("img"):null}init(){!this.container||!this.thumbs||!this.mainContainer||!this.mainImg||this.bindThumbs()}bindThumbs(){const e=Array.from(this.thumbs.querySelectorAll(".gallery__thumb"));e.forEach((t,i)=>{t.addEventListener("click",s=>{s.preventDefault(),this.setActiveThumb(i,e);const r=t.querySelector("img")?.getAttribute("src");r&&this.mainImg&&this.mainContainer&&this.mainImg.setAttribute("src",r)})})}setActiveThumb(e,t){t.forEach((i,s)=>{s===e?i.classList.add("is-active"):i.classList.remove("is-active")})}}const S={offices:{gridSelector:".offices-page__list",cardSelector:".office-card",wideClass:"wide",tallClass:"tall"},blog:{gridSelector:".offices-page__list",cardSelector:".office-card",wideClass:"wide",tallClass:"tall"}};function O(){const c=[];return Object.keys(S).forEach(e=>{const t=S[e];document.querySelector(t.gridSelector)&&c.push(t)}),c}class x{constructor(e={}){this.config={gridSelector:".grid-list",cardSelector:".grid-card",wideClass:"wide",tallClass:"tall",...e},this.gridContainer=null,this.cards=[]}init(){this.gridContainer=document.querySelector(this.config.gridSelector),this.gridContainer&&(this.cards=Array.from(this.gridContainer.querySelectorAll(this.config.cardSelector)),this.arrangeGrid())}arrangeGrid(){const e=this.cards.filter(t=>t.style.display!=="none"&&!t.hidden);this.cards.forEach(t=>{t.classList.remove(this.config.wideClass),t.classList.remove(this.config.tallClass)}),e.forEach((t,i)=>{const s=i%10;s===0?t.classList.add(this.config.tallClass):s===1?t.classList.add(this.config.wideClass):s===5?t.classList.add(this.config.wideClass):s===6&&t.classList.add(this.config.tallClass)})}update(){this.init()}getPatternInfo(){return{cycle:10,widePositions:[1,5],tallPositions:[0,6],normalPositions:[2,3,4,7,8,9]}}}class B{constructor({rootSelector:e,navListSelector:t,sectionsSelector:i,topOffsetPx:s=120}){this.rootSelector=e,this.navListSelector=t,this.sectionsSelector=i,this.topOffsetPx=s,this.rootElement=null,this.navItems=[],this.sections=[],this.observer=null,this.activeIndex=-1,this.updateTimeout=null,this.handleResize=this.handleResize.bind(this)}init(){if(!this.isDesktop())return;this.rootElement=document.querySelector(this.rootSelector);const e=document.querySelector(this.navListSelector),t=Array.from(document.querySelectorAll(this.sectionsSelector));this.navItems=e?Array.from(e.querySelectorAll(".office-page__nav-item")):[];const i=new Set(this.navItems.map(o=>o.getAttribute("data-target")).filter(Boolean));if(this.sections=t.filter(o=>o.id&&i.has(o.id)),!this.rootElement||this.sections.length===0||this.navItems.length===0)return;const s=window.IntersectionObserver;s&&(this.observer=new s(o=>{const r=o.filter(l=>l.isIntersecting);if(r.length===0)return;let n=null,u=1/0;if(r.forEach(l=>{const a=l.target.getBoundingClientRect();if(a.top<=130&&a.bottom>130){const h=Math.abs(a.top-130);h<u&&(u=h,n=l.target)}}),n){const l=this.sections.indexOf(n);l>=0&&(this.updateTimeout&&clearTimeout(this.updateTimeout),this.updateTimeout=setTimeout(()=>{this.setActive(l)},50))}},{root:null,rootMargin:"-130px 0px -100% 0px",threshold:[0]}),this.sections.forEach(o=>this.observer.observe(o)),this.navItems.forEach(o=>{o.addEventListener("click",r=>{r.preventDefault();const n=o.getAttribute("data-target");if(!n)return;const u=document.getElementById(n);if(!u)return;const l=u.getBoundingClientRect(),a=window.scrollY+l.top;window.scrollTo({top:Math.max(a-this.topOffsetPx,0),behavior:"smooth"})})}),window.addEventListener("resize",this.handleResize),this.forceUpdateActiveOnInit())}destroy(){window.removeEventListener("resize",this.handleResize),this.updateTimeout&&(clearTimeout(this.updateTimeout),this.updateTimeout=null),this.observer&&(this.observer.disconnect(),this.observer=null),this.sections=[],this.navItems=[],this.rootElement=null,this.activeIndex=-1}handleResize(){this.isDesktop()||this.destroy()}setActive(e){e!==this.activeIndex&&(this.activeIndex=e,this.navItems.forEach((t,i)=>{i===e?t.classList.add("active"):t.classList.remove("active")}))}forceUpdateActiveOnInit(){let e=null,t=Number.POSITIVE_INFINITY;if(this.navItems.forEach(i=>{const s=i.getAttribute("data-target"),o=s?document.getElementById(s):null;if(!o)return;const r=o.getBoundingClientRect(),n=Math.abs(r.top-this.topOffsetPx);n<t&&(t=n,e=i)}),e){const i=this.navItems.indexOf(e);i>=0&&this.setActive(i)}}isDesktop(){return window.innerWidth>1150}}class H{constructor(e={}){this.config={selector:".scroll-header",scrollClass:"scroll",scrollThreshold:100,maxWidth:1024,enabled:!0,...e},this.header=null,this.isScrolled=!1,this.isActive=!1,this.handleScroll=this.handleScroll.bind(this),this.handleResize=this.handleResize.bind(this)}init(){this.config.enabled&&(this.header=document.querySelector(this.config.selector),this.header&&(this.checkScreenSize(),this.bindEvents(),this.handleScroll()))}checkScreenSize(){this.isActive=window.innerWidth<=this.config.maxWidth}bindEvents(){window.addEventListener("scroll",this.handleScroll,{passive:!0}),window.addEventListener("resize",this.handleResize,{passive:!0})}handleScroll(){if(!this.header||!this.isActive)return;const t=(window.pageYOffset||document.documentElement.scrollTop)>this.config.scrollThreshold;t&&!this.isScrolled?this.addScrollClass():!t&&this.isScrolled&&this.removeScrollClass()}handleResize(){this.checkScreenSize(),!this.isActive&&this.isScrolled&&this.removeScrollClass()}addScrollClass(){this.header.classList.add(this.config.scrollClass),this.isScrolled=!0,this.config.onScroll&&this.config.onScroll(!0,this.header)}removeScrollClass(){this.header.classList.remove(this.config.scrollClass),this.isScrolled=!1,this.config.onScroll&&this.config.onScroll(!1,this.header)}updateConfig(e){this.config={...this.config,...e},(e.selector||e.maxWidth)&&(this.destroy(),this.init())}destroy(){window.removeEventListener("scroll",this.handleScroll),window.removeEventListener("resize",this.handleResize),this.header&&this.isScrolled&&this.removeScrollClass()}getState(){return{isScrolled:this.isScrolled,isActive:this.isActive,header:this.header}}}const D={selector:".office-page__header",scrollClass:"scroll",scrollThreshold:30,maxWidth:1150,enabled:!0};function F(c){return{office:D}[c]||null}class W{constructor(){this.headerHeight=this.getHeaderHeight(),this.scrollDuration=800,this.easing=this.easeInOutCubic}getHeaderHeight(){const e=document.querySelector(".header");return e?e.offsetHeight:0}easeInOutCubic(e){return e<.5?4*e*e*e:(e-1)*(2*e-2)*(2*e-2)+1}scrollToSection(e){const t=document.getElementById(e);if(!t)return;this.updateHeaderHeight();const i=t.offsetTop-this.headerHeight,s=window.pageYOffset,o=i-s,r=Date.now(),n=()=>{const l=Date.now()-r,a=Math.min(l/this.scrollDuration,1),h=this.easing(a);window.scrollTo(0,s+o*h),a<1&&requestAnimationFrame(n)};requestAnimationFrame(n)}updateHeaderHeight(){this.headerHeight=this.getHeaderHeight()}}class R{constructor(){this.currentPage="home",this.components={header:null,faqAccordion:null,gridManager:null,filterManager:null,scrollHeader:null,officeScrollSpy:null},this.smoothScroll=new W,this.feedbackModal=new T({endpoint:"/add.php",app:this})}init(){this.bindEvents(),this.initComponents(),this.loadPage("home"),window.addEventListener("popstate",e=>{const t=e.state?.page||this.getPageFromUrl();t!==this.currentPage&&this.loadPageWithoutHistory(t)})}getMenuPageName(e){return e==="office"?"offices":e==="blog-post"?"blog":e}async loadPage(e){try{const i=await(await fetch(`/src/pages/${e}.html`)).text(),s=document.getElementById("page-content");s&&(s.innerHTML=i),this.currentPage=e;const o=e==="home"?"/":`/${e}`;if(window.history.pushState({page:e},"",o),this.initComponents(),this.components.header){const r=this.getMenuPageName(e);this.components.header.onPageChange(r)}document.querySelector(".gallery")&&new b().init(),this.initSliders(),this.scrollToTop()}catch{this.showErrorPage()}}initComponents(){document.querySelector(".header")&&!this.components.header&&(this.components.header=new E,this.components.header.init()),document.querySelector(".faq")&&(this.components.faqAccordion=new k(".faq")),this.initGridManagers(),this.initFilterManagers(),this.initScrollHeader(),this.initOfficeScrollSpy()}initGridManagers(){O().forEach(t=>{this.components.gridManager=new x(t),this.components.gridManager.init()})}initFilterManagers(){let e=M();if(e.length===0){const t=q(this.currentPage);t&&(e=[t])}e.forEach(t=>{this.components.filterManager=new I(t),this.components.filterManager.init(),this.components.filterManager.setFilterChangeCallback((i,s)=>{this.handleFilterChange(i,s)})})}initScrollHeader(){this.components.scrollHeader&&this.components.scrollHeader.destroy();const e=F(this.currentPage);e&&e.enabled&&(this.components.scrollHeader=new H(e),this.components.scrollHeader.init())}initOfficeScrollSpy(){if(this.components.officeScrollSpy&&(this.components.officeScrollSpy.destroy(),this.components.officeScrollSpy=null),this.currentPage!=="office")return;const e=document.querySelector(".office-page__root"),t=document.querySelector(".office-page__nav-list"),i=document.querySelectorAll(".office-page__content-left .office-page__section").length>0;e&&t&&i&&(this.components.officeScrollSpy=new B({rootSelector:".office-page__root",navListSelector:".office-page__nav-list",sectionsSelector:".office-page__content-left .office-page__section",topOffsetPx:120}),this.components.officeScrollSpy.init())}handleFilterChange(){this.components.gridManager&&this.components.gridManager.update()}initSliders(){_(async()=>{const{initPageSliders:e}=await import("./SlidersInit-BkrjTXZy.js");return{initPageSliders:e}},[],import.meta.url).then(({initPageSliders:e})=>{e(this.currentPage)})}scrollToTop(){window.scrollTo({top:0,left:0,behavior:"smooth"})}bindEvents(){document.addEventListener("click",e=>{let t=e.target;for(;t&&t!==document.body;){if(t.matches("[data-page]")){e.preventDefault();const i=t.getAttribute("data-page");this.loadPage(i);return}t=t.parentElement}}),document.addEventListener("click",e=>{let t=e.target;for(;t&&t!==document.body;){if(t.classList&&t.classList.contains("blog-card__link")){e.preventDefault(),this.loadPage("blog-post");return}if(t.classList&&t.classList.contains("office-card__link")){e.preventDefault(),this.loadPage("office");return}t=t.parentElement}}),document.addEventListener("click",e=>{let t=e.target;for(;t&&t!==document.body;){if(t.matches("[data-feedback-modal]")){e.preventDefault(),this.feedbackModal.open();return}t=t.parentElement}}),document.addEventListener("click",e=>{e.target.matches(".hero__arrow")&&(e.preventDefault(),this.smoothScroll.scrollToSection("about-section"))}),window.addEventListener("resize",()=>{this.smoothScroll.updateHeaderHeight()})}async loadPageWithoutHistory(e){try{const i=await(await fetch(`/src/pages/${e}.html`)).text(),s=document.getElementById("page-content");if(s&&(s.innerHTML=i),this.currentPage=e,this.initComponents(),this.components.header){const o=this.getMenuPageName(e);this.components.header.onPageChange(o)}document.querySelector(".gallery")&&new b().init(),this.initSliders(),this.scrollToTop()}catch{this.showErrorPage()}}getPageFromUrl(){return(window.location.pathname.split("/").pop()||"home").replace(".html","")}showErrorPage(){const e=document.getElementById("page-content");e&&(e.innerHTML=`
        <div class="section">
          <div class="container">
            <h1>Ошибка загрузки страницы</h1>
            <p>К сожалению, произошла ошибка при загрузке страницы. Попробуйте обновить страницу.</p>
          </div>
        </div>
      `)}showModal(){const e=document.createElement("div");e.className="modal-overlay",e.innerHTML=`
    `,document.body.appendChild(e),e.querySelector(".modal-close").onclick=()=>this.closeModal(e),e.querySelector(".modal-btn").onclick=()=>this.closeModal(e),e.onclick=t=>{t.target===e&&this.closeModal(e)}}closeModal(e){e.remove()}}document.addEventListener("DOMContentLoaded",()=>{new R().init()});
