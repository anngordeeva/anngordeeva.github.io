(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))s(i);new MutationObserver(i=>{for(const n of i)if(n.type==="childList")for(const r of n.addedNodes)r.tagName==="LINK"&&r.rel==="modulepreload"&&s(r)}).observe(document,{childList:!0,subtree:!0});function t(i){const n={};return i.integrity&&(n.integrity=i.integrity),i.referrerPolicy&&(n.referrerPolicy=i.referrerPolicy),i.crossOrigin==="use-credentials"?n.credentials="include":i.crossOrigin==="anonymous"?n.credentials="omit":n.credentials="same-origin",n}function s(i){if(i.ep)return;i.ep=!0;const n=t(i);fetch(i.href,n)}})();const b="modulepreload",C=function(o,e){return new URL(o,e).href},m={},S=function(e,t,s){let i=Promise.resolve();if(t&&t.length>0){let c=function(l){return Promise.all(l.map(h=>Promise.resolve(h).then(f=>({status:"fulfilled",value:f}),f=>({status:"rejected",reason:f}))))};const r=document.getElementsByTagName("link"),a=document.querySelector("meta[property=csp-nonce]"),d=a?.nonce||a?.getAttribute("nonce");i=c(t.map(l=>{if(l=C(l,s),l in m)return;m[l]=!0;const h=l.endsWith(".css"),f=h?'[rel="stylesheet"]':"";if(!!s)for(let g=r.length-1;g>=0;g--){const p=r[g];if(p.href===l&&(!h||p.rel==="stylesheet"))return}else if(document.querySelector(`link[href="${l}"]${f}`))return;const u=document.createElement("link");if(u.rel=h?"stylesheet":b,h||(u.as="script"),u.crossOrigin="",u.href=l,d&&u.setAttribute("nonce",d),document.head.appendChild(u),h)return new Promise((g,p)=>{u.addEventListener("load",g),u.addEventListener("error",()=>p(new Error(`Unable to preload CSS for ${l}`)))})}))}function n(r){const a=new Event("vite:preloadError",{cancelable:!0});if(a.payload=r,window.dispatchEvent(a),!a.defaultPrevented)throw r}return i.then(r=>{for(const a of r||[])a.status==="rejected"&&n(a.reason);return e().catch(n)})};class w{constructor(){this.isMenuOpen=!1,this.burgerBtn=null,this.mobileMenu=null,this.navLinks=[],this.header=null,this.isScrolled=!1,this.currentPage="home",this.whiteBgPages=["offices"]}init(){this.header=document.querySelector(".header"),this.burgerBtn=document.getElementById("burger-btn"),this.mobileMenu=document.getElementById("mobile-menu"),this.navLinks=document.querySelectorAll(".header__nav-link"),this.logo=document.querySelector(".header__logo"),this.currentPage=this.getCurrentPage(),this.bindEvents(),this.setupMobileMenu(),this.initScrollHandler(),this.updateHeaderState(),this.setActiveLink(this.currentPage)}bindEvents(){if(this.burgerBtn&&this.burgerBtn.addEventListener("click",()=>this.toggleMobileMenu()),this.mobileMenu){const e=this.mobileMenu.querySelector(".mobile-menu__overlay");e&&e.addEventListener("click",()=>this.closeMobileMenu())}this.logo&&this.logo.addEventListener("click",()=>this.closeMobileMenu()),this.navLinks.forEach(e=>{e.addEventListener("click",()=>this.closeMobileMenu())})}setupMobileMenu(){const e=this.mobileMenu?.querySelector(".mobile-menu__nav");if(!e||this.navLinks.length===0)return;e.innerHTML="",this.navLinks.forEach(s=>{const i=s.cloneNode(!0);i.classList.remove("header__nav-link"),i.classList.add("mobile-menu__link"),e.appendChild(i)}),e.querySelectorAll(".mobile-menu__link").forEach(s=>{s.addEventListener("click",()=>this.closeMobileMenu())})}toggleMobileMenu(){this.isMenuOpen?this.closeMobileMenu():this.openMobileMenu()}openMobileMenu(){this.mobileMenu&&this.burgerBtn&&(this.mobileMenu.classList.add("active"),this.burgerBtn.classList.add("active"),document.body.style.overflow="hidden",this.isMenuOpen=!0,this.updateHeaderState())}closeMobileMenu(){this.mobileMenu&&this.burgerBtn&&(this.mobileMenu.classList.remove("active"),this.burgerBtn.classList.remove("active"),document.body.style.overflow="",this.isMenuOpen=!1,this.updateHeaderState())}initScrollHandler(){window.addEventListener("scroll",()=>{const e=window.pageYOffset||document.documentElement.scrollTop;this.isScrolled=e>50,this.updateHeaderState()})}updateHeaderState(){if(!this.header)return;const e=this.whiteBgPages.includes(this.currentPage),t=!e&&this.isScrolled;this.isMenuOpen||e||t?this.header.classList.add("header--white-bg"):this.header.classList.remove("header--white-bg")}getCurrentPage(){return(window.location.pathname.split("/").pop()||"home").replace(".html","")}onPageChange(e){this.currentPage=e,this.updateHeaderState(),this.setActiveLink(e)}setActiveLink(e){if(this.navLinks.forEach(s=>{s.classList.remove("active")}),e==="home")return;const t=Array.from(this.navLinks).find(s=>s.getAttribute("data-page")===e);t&&t.classList.add("active")}update(){this.navLinks=document.querySelectorAll(".header__nav-link"),this.setupMobileMenu(),this.updateHeaderState();const e=this.getCurrentPage();this.setActiveLink(e)}}class M{constructor(e,t={}){this.container=typeof e=="string"?document.querySelector(e):e,this.options={itemSelector:".accordion__item",triggerSelector:".accordion__trigger",contentSelector:".accordion__content",activeClass:"active",allowMultiple:!1,closeOthers:!0,animationDuration:300,onOpen:null,onClose:null,onToggle:null,...t},this.items=[],this.init()}init(){this.container&&(this.items=Array.from(this.container.querySelectorAll(this.options.itemSelector)),this.items.length!==0&&this.bindEvents())}bindEvents(){this.items.forEach((e,t)=>{const s=e.querySelector(this.options.triggerSelector);s&&s.addEventListener("click",i=>{i.preventDefault(),this.toggleItem(t)})})}toggleItem(e){const t=this.items[e];if(!t)return;t.classList.contains(this.options.activeClass)?this.closeItem(e):this.openItem(e)}openItem(e){const t=this.items[e];t&&(this.options.closeOthers&&this.closeAll(),t.classList.add(this.options.activeClass),this.options.onOpen&&this.options.onOpen(t,e),this.options.onToggle&&this.options.onToggle(t,e,!0))}closeItem(e){const t=this.items[e];t&&(t.classList.remove(this.options.activeClass),this.options.onClose&&this.options.onClose(t,e),this.options.onToggle&&this.options.onToggle(t,e,!1))}closeAll(){this.items.forEach((e,t)=>{e.classList.contains(this.options.activeClass)&&this.closeItem(t)})}openAll(){this.options.allowMultiple&&this.items.forEach((e,t)=>{e.classList.contains(this.options.activeClass)||this.openItem(t)})}getActiveItems(){return this.items.filter(e=>e.classList.contains(this.options.activeClass))}getActiveIndex(){const e=this.getActiveItems();return e.length>0?this.items.indexOf(e[0]):null}refresh(){this.items=Array.from(this.container.querySelectorAll(this.options.itemSelector)),this.bindEvents()}destroy(){this.items.forEach(e=>{const t=e.querySelector(this.options.triggerSelector);t&&t.replaceWith(t.cloneNode(!0))}),this.items=[]}}class L{constructor(e=".faq"){this.container=e,this.accordion=null,this.init()}init(){const e=typeof this.container=="string"?document.querySelector(this.container):this.container;e&&(this.accordion=new M(e,{itemSelector:".faq__item",triggerSelector:".faq__title-wrapper",contentSelector:".faq__answer",activeClass:"active",allowMultiple:!1,closeOthers:!0}))}openItem(e){this.accordion&&this.accordion.openItem(e)}closeAll(){this.accordion&&this.accordion.closeAll()}getActiveItem(){if(this.accordion){const e=this.accordion.getActiveItems();return e.length>0?e[0]:null}return null}refresh(){this.accordion&&this.accordion.refresh()}destroy(){this.accordion&&(this.accordion.destroy(),this.accordion=null)}}const v={offices:{filterSelector:".offices-page__filter-button",activeClass:"active",cardSelector:".office-card",typeAttribute:"data-type",defaultType:"business-center",filterTypes:{all:"all","business centers":"business-center",coworkings:"coworking"},typeMapping:{"business-center":"business center",coworking:"coworking"}},universal:{filterSelector:".filter-button",activeClass:"active",cardSelector:".card",typeAttribute:"data-type",defaultType:"default",filterTypes:{}}};function E(){const o=[];return Object.keys(v).forEach(e=>{const t=v[e];document.querySelector(t.filterSelector)&&o.push({...t,pageName:e})}),o}function T(o,e,t="data-type",s="default"){return{filterSelector:o,activeClass:"active",cardSelector:e,typeAttribute:t,defaultType:s,filterTypes:{}}}function A(){const o=[".offices-page__filter-button",".filter-button",".btn-filter","[data-filter]"],e=[".office-card",".card",".grid-card","[data-type]"];for(const t of o)if(document.querySelector(t)){for(const s of e)if(document.querySelector(s))return T(t,s)}return null}class P{constructor(){this.data=[],this.filteredData=[],this.currentFilter="all",this.availableTypes=new Set(["all"])}init(e=".card",t="data-type",s="default"){const i=document.querySelectorAll(e);this.data=Array.from(i).map((n,r)=>{const a=n.getAttribute(t)||s;return{id:r,element:n,type:a,visible:!0}}),this.updateAvailableTypes(),this.filteredData=[...this.data],this.updateCounts()}updateAvailableTypes(){this.availableTypes.clear(),this.availableTypes.add("all"),this.data.forEach(e=>{e.type&&this.availableTypes.add(e.type)})}filterByType(e){this.availableTypes.has(e)&&(this.currentFilter=e,this.data.forEach(t=>{e==="all"||t.type===e?(t.visible=!0,t.element.style.display=""):(t.visible=!1,t.element.style.display="none")}),this.filteredData=this.data.filter(t=>t.visible),this.updateCounts())}getCounts(){const e={all:this.data.length};return this.availableTypes.forEach(t=>{t!=="all"&&(e[t]=0)}),this.data.forEach(t=>{t.type&&Object.prototype.hasOwnProperty.call(e,t.type)&&e[t.type]++}),e}getFilteredCount(){return this.filteredData.length}updateCounts(e=".filter-button",t=null){const s=this.getCounts();document.querySelectorAll(e).forEach(n=>{const r=n.textContent.toLowerCase(),a=n.textContent;if(r.includes("all")){n.textContent=a.replace(/\(\d+\)/,`(${s.all})`);return}let d=!1;this.availableTypes.forEach(c=>{if(c==="all")return;const l=t&&t[c]?t[c].toLowerCase():c.toLowerCase();r.includes(l)&&s[c]!==void 0&&(n.textContent=a.replace(/\(\d+\)/,`(${s[c]})`),d=!0)}),d||this.availableTypes.forEach(c=>{c==="all"||d||r.includes(c.toLowerCase())&&s[c]!==void 0&&(n.textContent=a.replace(/\(\d+\)/,`(${s[c]})`),d=!0)})})}getCurrentFilter(){return this.currentFilter}getAllData(){return this.data}getFilteredData(){return this.filteredData}getAvailableTypes(){return Array.from(this.availableTypes)}hasType(e){return this.availableTypes.has(e)}refresh(e=".card",t="data-type",s="default"){this.init(e,t,s)}}class k{constructor(e={}){this.config={filterSelector:".filter-button",activeClass:"active",cardSelector:".card",typeAttribute:"data-type",filterTypes:{},...e},this.filterButtons=[],this.dataManager=new P,this.onFilterChange=null}init(){this.filterButtons=Array.from(document.querySelectorAll(this.config.filterSelector)),this.filterButtons.length!==0&&(this.dataManager.init(this.config.cardSelector,this.config.typeAttribute,this.config.defaultType||"default"),this.bindEvents(),this.updateButtonCounts())}bindEvents(){this.filterButtons.forEach(e=>{e.addEventListener("click",t=>{t.preventDefault(),this.handleFilterClick(e)})})}handleFilterClick(e){this.filterButtons.forEach(i=>{i.classList.remove(this.config.activeClass)}),e.classList.add(this.config.activeClass);const t=e.textContent.toLowerCase();let s="all";this.config.filterTypes&&Object.keys(this.config.filterTypes).length>0?Object.keys(this.config.filterTypes).forEach(i=>{t.includes(i.toLowerCase())&&(s=this.config.filterTypes[i])}):this.dataManager.getAvailableTypes().forEach(n=>{n!=="all"&&t.includes(n.toLowerCase())&&(s=n)}),this.dataManager.filterByType(s),this.onFilterChange&&this.onFilterChange(s,this.dataManager.getFilteredData())}update(){this.filterButtons=Array.from(document.querySelectorAll(this.config.filterSelector)),this.dataManager.refresh(this.config.cardSelector,this.config.typeAttribute,this.config.defaultType||"default"),this.bindEvents(),this.updateButtonCounts()}updateButtonCounts(){const e=this.config.typeMapping||null;this.dataManager.updateCounts(this.config.filterSelector,e)}setFilterChangeCallback(e){this.onFilterChange=e}getDataManager(){return this.dataManager}applyFilter(e){if(!this.dataManager.hasType(e))return;const t=this.filterButtons.find(s=>{const i=s.textContent.toLowerCase();return this.config.filterTypes&&Object.keys(this.config.filterTypes).length>0?Object.keys(this.config.filterTypes).some(n=>i.includes(n.toLowerCase())&&this.config.filterTypes[n]===e):i.includes(e.toLowerCase())});t&&this.handleFilterClick(t)}destroy(){this.filterButtons.forEach(e=>{e.removeEventListener("click",this.handleFilterClick)}),this.filterButtons=[]}}const y={offices:{gridSelector:".offices-page__list",cardSelector:".office-card",wideClass:"wide",tallClass:"tall"}};function _(){const o=[];return Object.keys(y).forEach(e=>{const t=y[e];document.querySelector(t.gridSelector)&&o.push(t)}),o}class q{constructor(e={}){this.config={gridSelector:".grid-list",cardSelector:".grid-card",wideClass:"wide",tallClass:"tall",...e},this.gridContainer=null,this.cards=[]}init(){this.gridContainer=document.querySelector(this.config.gridSelector),this.gridContainer&&(this.cards=Array.from(this.gridContainer.querySelectorAll(this.config.cardSelector)),this.arrangeGrid())}arrangeGrid(){const e=this.cards.filter(t=>t.style.display!=="none"&&!t.hidden);this.cards.forEach(t=>{t.classList.remove(this.config.wideClass),t.classList.remove(this.config.tallClass)}),e.forEach((t,s)=>{const i=s%10;i===0?t.classList.add(this.config.tallClass):i===1?t.classList.add(this.config.wideClass):i===5?t.classList.add(this.config.wideClass):i===6&&t.classList.add(this.config.tallClass)})}update(){this.init()}getPatternInfo(){return{cycle:10,widePositions:[1,5],tallPositions:[0,6],normalPositions:[2,3,4,7,8,9]}}}class B{constructor(){this.headerHeight=this.getHeaderHeight(),this.scrollDuration=800,this.easing=this.easeInOutCubic}getHeaderHeight(){const e=document.querySelector(".header");return e?e.offsetHeight:0}easeInOutCubic(e){return e<.5?4*e*e*e:(e-1)*(2*e-2)*(2*e-2)+1}scrollToSection(e){const t=document.getElementById(e);if(!t)return;this.updateHeaderHeight();const s=t.offsetTop-this.headerHeight,i=window.pageYOffset,n=s-i,r=Date.now(),a=()=>{const c=Date.now()-r,l=Math.min(c/this.scrollDuration,1),h=this.easing(l);window.scrollTo(0,i+n*h),l<1&&requestAnimationFrame(a)};requestAnimationFrame(a)}updateHeaderHeight(){this.headerHeight=this.getHeaderHeight()}}class O{constructor(){this.currentPage="home",this.components={header:null,faqAccordion:null,gridManager:null,filterManager:null},this.smoothScroll=new B}init(){this.bindEvents(),this.initComponents(),this.loadPage("home"),window.addEventListener("popstate",e=>{const t=e.state?.page||this.getPageFromUrl();t!==this.currentPage&&this.loadPageWithoutHistory(t)})}async loadPage(e){try{const s=await(await fetch(`/src/pages/${e}.html`)).text(),i=document.getElementById("page-content");i&&(i.innerHTML=s),this.currentPage=e;const n=e==="home"?"/":`/${e}`;window.history.pushState({page:e},"",n),this.initComponents(),this.components.header&&this.components.header.onPageChange(e),this.initSliders(),this.scrollToTop()}catch{this.showErrorPage()}}initComponents(){document.querySelector(".header")&&!this.components.header&&(this.components.header=new w,this.components.header.init()),document.querySelector(".faq")&&(this.components.faqAccordion=new L(".faq")),this.initGridManagers(),this.initFilterManagers()}initGridManagers(){_().forEach(t=>{this.components.gridManager=new q(t),this.components.gridManager.init()})}initFilterManagers(){let e=E();if(e.length===0){const t=A(this.currentPage);t&&(e=[t])}e.forEach(t=>{this.components.filterManager=new k(t),this.components.filterManager.init(),this.components.filterManager.setFilterChangeCallback((s,i)=>{this.handleFilterChange(s,i)})})}handleFilterChange(){this.components.gridManager&&this.components.gridManager.update()}initSliders(){S(async()=>{const{initPageSliders:e}=await import("./SlidersInit-B3eU0mPE.js");return{initPageSliders:e}},[],import.meta.url).then(({initPageSliders:e})=>{e(this.currentPage)})}scrollToTop(){window.scrollTo({top:0,left:0,behavior:"smooth"})}bindEvents(){document.addEventListener("click",e=>{let t=e.target;for(;t&&t!==document.body;){if(t.matches("[data-page]")){e.preventDefault();const s=t.getAttribute("data-page");this.loadPage(s);return}t=t.parentElement}}),document.addEventListener("click",e=>{e.target.textContent==="TESTING"&&this.showModal()}),document.addEventListener("click",e=>{e.target.matches(".hero__arrow")&&(e.preventDefault(),this.smoothScroll.scrollToSection("about-section"))}),window.addEventListener("resize",()=>{this.smoothScroll.updateHeaderHeight()})}async loadPageWithoutHistory(e){try{const s=await(await fetch(`/src/pages/${e}.html`)).text(),i=document.getElementById("page-content");i&&(i.innerHTML=s),this.currentPage=e,this.initComponents(),this.components.header&&this.components.header.onPageChange(e),this.initSliders(),this.scrollToTop()}catch{this.showErrorPage()}}getPageFromUrl(){return(window.location.pathname.split("/").pop()||"home").replace(".html","")}showErrorPage(){const e=document.getElementById("page-content");e&&(e.innerHTML=`
        <div class="section">
          <div class="container">
            <h1>Ошибка загрузки страницы</h1>
            <p>К сожалению, произошла ошибка при загрузке страницы. Попробуйте обновить страницу.</p>
          </div>
        </div>
      `)}showModal(){const e=document.createElement("div");e.className="modal-overlay",e.innerHTML=`
    `,document.body.appendChild(e),e.querySelector(".modal-close").onclick=()=>this.closeModal(e),e.querySelector(".modal-btn").onclick=()=>this.closeModal(e),e.onclick=t=>{t.target===e&&this.closeModal(e)}}closeModal(e){e.remove()}}document.addEventListener("DOMContentLoaded",()=>{new O().init()});
